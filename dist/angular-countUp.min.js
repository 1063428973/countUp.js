!function(t){"use strict";var a=t.module("countUpModule",[]);a.directive("countUp",["$filter",function(t){return{restrict:"A",link:function(a,n,e){function i(a,n,i,r,o){for(var l=0,s=["webkit","moz","ms","o"],u=0;u<s.length&&!window.requestAnimationFrame;++u)window.requestAnimationFrame=window[s[u]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[s[u]+"CancelAnimationFrame"]||window[s[u]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var a=(new Date).getTime(),n=Math.max(0,16-(a-l)),e=window.setTimeout(function(){t(a+n)},n);return l=a+n,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),this.d=document.getElementById(a),this.startVal=n,this.endVal=i,this.countDown=this.startVal>this.endVal,this.frameVal=this.startVal,this.duration=1e3*o||2e3;var m=this;this.printValue=function(a){var n=t("number")(a,r);this.d.innerHTML=n},this.easeOutExpo=function(t,a,n,e){return n*(-Math.pow(2,-10*t/e)+1)*1024/1023+a},this.count=function(t){m.startTime||(m.startTime=t),m.timestamp=t;var a=t-m.startTime;m.remaining=m.duration-a,m.frameVal=m.countDown?m.startVal-m.easeOutExpo(a,0,m.startVal-m.endVal,m.duration):m.easeOutExpo(a,m.startVal,m.endVal-m.startVal,m.duration),m.frameVal=m.countDown?m.frameVal<m.endVal?m.endVal:m.frameVal:m.frameVal>m.endVal?m.endVal:m.frameVal,m.frameVal=Math.round(m.frameVal),m.printValue(m.frameVal),a<m.duration?m.rAF=requestAnimationFrame(m.count):m.callback&&m.callback()},this.start=function(t){return console.log("start: "+e.id),m.callback=t,isNaN(m.endVal)||isNaN(m.startVal)||m.startVal===m.endVal?this.d.innerHTML=i:m.rAF=requestAnimationFrame(m.count),!1},this.reset=function(){m.paused=!1,delete m.startTime,m.startVal=n,cancelAnimationFrame(m.rAF),m.printValue(m.startVal)},this.update=function(t){delete m.callback,cancelAnimationFrame(m.rAF),m.paused=!1,delete m.startTime,m.startVal=m.frameVal,m.endVal=Number(t),m.countDown=m.startVal>m.endVal,m.rAF=requestAnimationFrame(m.count)},m.printValue(m.startVal)}function r(){l>9999?(m.reset(),m.start(function(){m.update(l)})):(m.reset(),m.start())}var o=e.startVal||0;isNaN(o)&&(o=Number(o.match(/[\d\-]+/g).join("")));var l=e.endVal||0;isNaN(l)&&(l=Number(l.match(/[\d\-]+/g).join("")));var s=Number(e.duration)||2.5,u=Number(e.decimals)||0,m=new i(e.id,o,l,u,s);l>9999&&(m=new i(e.id,o,l-100,u,s/2)),e.scrollSpyEvent?a.$on(e.scrollSpyEvent,function(t,a){a===e.id&&r()}):r(),n.on("click",function(){r()})}}}])}(angular);