!function(a){"use strict";var t=a.module("countUpModule",[]);t.directive("countUp",["$filter",function(a){return{restrict:"A",link:function(t,e,n){function i(t,e,n,i,r){for(var o=0,l=["webkit","moz","ms","o"],s=0;s<l.length&&!window.requestAnimationFrame;++s)window.requestAnimationFrame=window[l[s]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[l[s]+"CancelAnimationFrame"]||window[l[s]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,t){var e=(new Date).getTime(),n=Math.max(0,16-(e-o)),i=window.setTimeout(function(){a(e+n)},n);return o=e+n,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)}),this.d=document.getElementById(t),this.startVal=e,this.endVal=n,this.countDown=this.startVal>this.endVal,this.frameVal=this.startVal,this.duration=1e3*r||2e3,this.decimals=Math.max(0,i||0),this.dec=Math.pow(10,this.decimals);var m=this;this.printValue=function(t){console.log(t);var e=a("number")(t,i);console.log(e),this.d.innerHTML=e},this.easeOutExpo=function(a,t,e,n){return e*(-Math.pow(2,-10*a/n)+1)*1024/1023+t},this.count=function(a){m.startTime||(m.startTime=a),m.timestamp=a;var t=a-m.startTime;m.remaining=m.duration-t,m.countDown?m.frameVal=m.startVal-m.easeOutExpo(t,0,m.startVal-m.endVal,m.duration):m.frameVal=m.easeOutExpo(t,m.startVal,m.endVal-m.startVal,m.duration),m.countDown?m.frameVal=m.frameVal<m.endVal?m.endVal:m.frameVal:m.frameVal=m.frameVal>m.endVal?m.endVal:m.frameVal,m.frameVal=Math.round(m.frameVal*m.dec)/m.dec,m.printValue(m.frameVal),t<m.duration?m.rAF=requestAnimationFrame(m.count):m.callback&&m.callback()},this.start=function(a){return m.callback=a,isNaN(m.endVal)||isNaN(m.startVal)||m.startVal===m.endVal?this.d.innerHTML=n:m.rAF=requestAnimationFrame(m.count),!1},this.reset=function(){m.paused=!1,delete m.startTime,m.startVal=e,cancelAnimationFrame(m.rAF),m.printValue(m.startVal)},this.update=function(a){delete m.callback,cancelAnimationFrame(m.rAF),m.paused=!1,delete m.startTime,m.startVal=m.frameVal,m.endVal=Number(a),m.countDown=m.startVal>m.endVal,m.rAF=requestAnimationFrame(m.count)},m.printValue(m.startVal)}function r(){l>9999?(u.reset(),u.start(function(){u.update(l)})):(u.reset(),u.start())}var o=n.startVal||0;isNaN(o)&&(o=Number(o.match(/[\d\-\.]+/g).join("")));var l=n.endVal||0;isNaN(l)&&(l=Number(l.match(/[\d\-\.]+/g).join("")));var s=Number(n.duration)||2.5,m=Number(n.decimals)||0,u=new i(n.id,o,l,m,s);l>9999&&(u=new i(n.id,o,l-100,m,s/2)),n.scrollSpyEvent?t.$on(n.scrollSpyEvent,function(a,t){t===n.id&&r()}):r(),e.on("click",function(){r()})}}}])}(angular);